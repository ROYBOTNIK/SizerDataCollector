<?xml version="1.0" encoding="utf-8"?>
<configuration>
	<appSettings>
		<!-- Sizer endpoint config -->
		<add key="SizerHost" value="10.155.155.10" />
		<add key="SizerPort" value="8001" />
		<!-- Timeouts in seconds -->
		<add key="OpenTimeoutSec" value="5" />
		<add key="SendTimeoutSec" value="5" />
		<add key="ReceiveTimeoutSec" value="5" />
		<!-- Toggle ingestion vs probe-only -->
		<add key="EnableIngestion" value="false" />
		<!-- Comma-separated list of logical metric names -->
		<add key="EnabledMetrics" value="lanes_grade_fpm,lanes_size_fpm,machine_total_fpm,machine_cupfill,outlets_details" />
		<!-- Stage 2 polling/resilience settings -->
		<!-- PollIntervalSeconds controls the delay between successful ingestion cycles -->
		<add key="PollIntervalSeconds" value="60" />
		<!-- Backoff values only apply after failed cycles -->
		<add key="InitialBackoffSeconds" value="10" />
		<add key="MaxBackoffSeconds" value="300" />

		<!-- Logging -->
		<!-- If empty, logs will go next to the EXE in a 'logs' folder -->
		<add key="LogDirectory" value="" />
		<add key="LogLevel" value="Info" />
		<add key="DiagnosticMode" value="false" />
		<add key="DiagnosticUntilUtc" value="" />
		<add key="LogAsJson" value="false" />
		<add key="LogMaxFileBytes" value="10485760" />
		<add key="LogRetentionDays" value="14" />
		<add key="LogMaxFiles" value="100" />
	</appSettings>

	<!-- Database connection placeholder for TimescaleDB/Postgres (not used yet) -->
	<connectionStrings>
		<!-- TODO: update this when you're ready to connect to TimescaleDB -->
		<add name="TimescaleDb" connectionString="Host=127.0.0.1;Port=5432;Username=postgres;Password=root;Database=sizer_metrics_staging;" />
	</connectionStrings>

	<!-- WCF settings will be generated/populated here later when you add the Service Reference. -->
	<system.serviceModel>
		<bindings>
   <netNamedPipeBinding>
    <binding name="NetNamedPipeBinding_ISizerService">
     <security mode="None" />
    </binding>
   </netNamedPipeBinding>
   <wsHttpBinding>
    <binding name="WSHttpBinding_ISizerService">
     <security mode="None" />
    </binding>
   </wsHttpBinding>
  </bindings>
		<client>
   <endpoint address="http://10.155.155.10:8001/SizerService/" binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_ISizerService" contract="SizerServiceReference.ISizerService" name="WSHttpBinding_ISizerService" />
   <endpoint address="net.pipe://localhost/Compac/8001/SizerService" binding="netNamedPipeBinding" bindingConfiguration="NetNamedPipeBinding_ISizerService" contract="SizerServiceReference.ISizerService" name="NetNamedPipeBinding_ISizerService" />
  </client>
	</system.serviceModel>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Runtime.CompilerServices.Unsafe" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Text.Json" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.10" newVersion="6.0.0.10" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Buffers" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>
